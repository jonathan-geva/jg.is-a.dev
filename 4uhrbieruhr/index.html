<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4 Uhr Bier Uhr</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=TheSans:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --swisscom-navy: #001155;
            --swisscom-blue: #0066FF;
            --swisscom-red: #E40521;
            --swisscom-magenta: #E4007A;
            --swisscom-purple: #6B1F7C;
            --white: #ffffff;
            --white-90: rgba(255, 255, 255, 0.9);
            --white-70: rgba(255, 255, 255, 0.7);
            --white-50: rgba(255, 255, 255, 0.5);
            --white-20: rgba(255, 255, 255, 0.2);
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--swisscom-navy) 0%, var(--swisscom-purple) 50%, var(--swisscom-magenta) 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            color: var(--white);
            position: relative;
            overflow: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Subtle animated background shapes */
        .bg-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .bg-shape {
            position: absolute;
            border-radius: 50%;
            background: var(--white-20);
            filter: blur(80px);
        }

        .bg-shape:nth-child(1) {
            width: 600px;
            height: 600px;
            top: -200px;
            right: -100px;
            animation: float1 20s ease-in-out infinite;
        }

        .bg-shape:nth-child(2) {
            width: 400px;
            height: 400px;
            bottom: -100px;
            left: -100px;
            animation: float2 25s ease-in-out infinite;
        }

        @keyframes float1 {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-50px, 50px); }
        }

        @keyframes float2 {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(50px, -30px); }
        }

        /* Swisscom Logo */
        .logo {
            position: absolute;
            top: 2rem;
            left: 2rem;
            z-index: 10;
        }

        .logo svg {
            width: 140px;
            height: auto;
        }

        .container {
            text-align: center;
            padding: 2rem;
            max-width: 900px;
            width: 100%;
            position: relative;
            z-index: 1;
        }

        .title {
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
            color: var(--white);
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: clamp(0.875rem, 2vw, 1.125rem);
            font-weight: 400;
            color: var(--white-70);
            margin-bottom: 3rem;
        }

        .countdown {
            display: flex;
            justify-content: center;
            align-items: baseline;
            gap: clamp(0.5rem, 2vw, 1.5rem);
            margin-bottom: 3rem;
        }

        .time-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: var(--white-20);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: clamp(1rem, 3vw, 2rem);
            min-width: clamp(80px, 18vw, 140px);
            border: 1px solid var(--white-20);
        }

        .time-value {
            font-size: clamp(2.5rem, 10vw, 5rem);
            font-weight: 700;
            line-height: 1;
            letter-spacing: -0.03em;
            color: var(--white);
            transition: transform 0.15s ease, color 0.3s ease;
            font-variant-numeric: tabular-nums;
        }

        .time-value.pulse {
            animation: subtlePulse 0.3s ease;
        }

        @keyframes subtlePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .time-label {
            font-size: clamp(0.6rem, 1.2vw, 0.75rem);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--white-70);
            margin-top: 0.75rem;
        }

        .separator {
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: 300;
            color: var(--white-50);
            line-height: 1;
            align-self: center;
            margin-bottom: 1.5rem;
        }

        .status {
            font-size: clamp(0.875rem, 2vw, 1.125rem);
            font-weight: 400;
            color: var(--white-70);
            transition: color 0.3s ease;
        }

        /* Last 10 seconds animation */
        .final-countdown .time-group {
            animation: urgentPulse 1s ease-in-out infinite;
            background: rgba(228, 5, 33, 0.3);
            border-color: rgba(228, 5, 33, 0.5);
        }

        .final-countdown .time-value {
            color: var(--white);
        }

        @keyframes urgentPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(228, 5, 33, 0.4); }
            50% { transform: scale(1.02); box-shadow: 0 0 30px 10px rgba(228, 5, 33, 0.2); }
        }

        .final-countdown .time-value.pulse {
            animation: finalPulse 0.5s ease;
        }

        @keyframes finalPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Celebration state */
        .celebration {
            position: relative;
        }

        .celebration .time-group {
            background: rgba(0, 170, 85, 0.3);
            border-color: rgba(0, 170, 85, 0.5);
        }

        .celebration .status {
            color: var(--white);
            font-weight: 600;
            font-size: clamp(1rem, 2.5vw, 1.5rem);
        }

        /* Celebration animation overlay */
        .celebration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .celebration-overlay.active {
            opacity: 1;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-20px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Beer emoji animation */
        .beer-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 200;
            pointer-events: none;
            font-size: 8rem;
        }

        .beer-container.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            animation: beerBounce 0.6s ease-in-out;
        }

        @keyframes beerBounce {
            0% { transform: translate(-50%, -50%) scale(0); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        /* Ripple effect on celebration */
        .ripple {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: transparent;
            border: 3px solid var(--white);
            opacity: 0;
            pointer-events: none;
            z-index: 150;
        }

        .ripple.active {
            animation: rippleExpand 1s ease-out forwards;
        }

        @keyframes rippleExpand {
            0% {
                width: 10px;
                height: 10px;
                opacity: 1;
            }
            100% {
                width: 200vmax;
                height: 200vmax;
                opacity: 0;
            }
        }

        /* Progress indicator */
        .progress-bar {
            width: 100%;
            max-width: 500px;
            height: 4px;
            background: var(--white-20);
            margin: 2rem auto 1.5rem;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--swisscom-magenta), var(--swisscom-red));
            transition: width 1s linear;
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(228, 0, 122, 0.5);
        }

        .celebration .progress-fill {
            background: linear-gradient(90deg, #00aa55, #00cc66);
            box-shadow: 0 0 10px rgba(0, 170, 85, 0.5);
        }

        /* Footer */
        .footer {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: var(--white-50);
            z-index: 1;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .separator {
                margin: 0 -0.25rem;
            }
            
            .logo {
                top: 1rem;
                left: 1rem;
            }
            
            .logo svg {
                width: 100px;
            }
            
            .time-group {
                padding: clamp(0.75rem, 2vw, 1.5rem);
                border-radius: 12px;
            }
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            body {
                animation: none;
            }
        }
    </style>
</head>
<body>
    <!-- Background shapes -->
    <div class="bg-shapes">
        <div class="bg-shape"></div>
        <div class="bg-shape"></div>
    </div>

    <!-- Swisscom Logo -->
    <div class="logo">
        <svg viewBox="0 0 200 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 0C8.954 0 0 8.954 0 20s8.954 20 20 20 20-8.954 20-20S31.046 0 20 0zm0 36c-8.837 0-16-7.163-16-16S11.163 4 20 4s16 7.163 16 16-7.163 16-16 16z" fill="white"/>
            <path d="M20 8c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12S26.627 8 20 8zm0 20c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z" fill="white"/>
            <text x="50" y="28" fill="white" font-family="Inter, sans-serif" font-weight="700" font-size="22">swisscom</text>
        </svg>
    </div>

    <div class="celebration-overlay" id="celebration-overlay"></div>
    <div class="beer-container" id="beer-emoji">üç∫</div>
    <div class="ripple" id="ripple"></div>

    <div class="container" id="container">
        <h1 class="title">Christmas Event üßë‚ÄçüéÑüéÑ</h1>
        <p class="subtitle">Countdown bis Christmas Event!!! ‚Ä¢ Freitag um 16:00 Uhr</p>

        <div class="countdown">
            <div class="time-group">
                <span class="time-value" id="days">0</span>
                <span class="time-label">Tage</span>
            </div>
            <span class="separator">:</span>
            <div class="time-group">
                <span class="time-value" id="hours">00</span>
                <span class="time-label">Stunden</span>
            </div>
            <span class="separator">:</span>
            <div class="time-group">
                <span class="time-value" id="minutes">00</span>
                <span class="time-label">Minuten</span>
            </div>
            <span class="separator">:</span>
            <div class="time-group">
                <span class="time-value" id="seconds">00</span>
                <span class="time-label">Sekunden</span>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <p class="status" id="status">Bis zum Christmas Event</p>
    </div>

    <div class="footer">Z√ºrich Time (Europe/Zurich)</div>

    <script>
        // Z√ºrich timezone
        const TIMEZONE = 'Europe/Zurich';
        const TARGET_DAY = 5; // Friday (0 = Sunday, 5 = Friday)
        const TARGET_HOUR = 16;
        const TARGET_MINUTE = 0;

        // DOM Elements
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const statusEl = document.getElementById('status');
        const progressEl = document.getElementById('progress');
        const containerEl = document.getElementById('container');
        const celebrationOverlay = document.getElementById('celebration-overlay');
        const beerEmoji = document.getElementById('beer-emoji');
        const ripple = document.getElementById('ripple');

        let prevValues = { days: '', hours: '', minutes: '', seconds: '' };
        let celebrationActive = false;
        let lastTenSecondsActive = false;

        // Get current time in Z√ºrich
        function getZurichTime() {
            return new Date(new Date().toLocaleString('en-US', { timeZone: TIMEZONE }));
        }

        // Get next Friday 16:00 in Z√ºrich time
        function getNextFriday16() {
            const now = getZurichTime();
            const target = new Date(now);
            
            // Set to 16:00
            target.setHours(TARGET_HOUR, TARGET_MINUTE, 0, 0);
            
            // Calculate days until Friday
            const currentDay = now.getDay();
            let daysUntilFriday = TARGET_DAY - currentDay;
            
            // If it's Friday but past 16:00, or if it's after Friday, go to next week
            if (daysUntilFriday < 0 || (daysUntilFriday === 0 && now >= target)) {
                daysUntilFriday += 7;
            }
            
            target.setDate(target.getDate() + daysUntilFriday);
            
            return target;
        }

        // Check if it's currently "Feierabend" time (Friday 16:00-17:00)
        function isFeierabendTime() {
            const now = getZurichTime();
            return now.getDay() === TARGET_DAY && 
                   now.getHours() >= TARGET_HOUR && 
                   now.getHours() < TARGET_HOUR + 1;
        }

        // Calculate progress through the week
        function getWeekProgress() {
            const now = getZurichTime();
            const target = getNextFriday16();
            
            // Total time in a week (7 days in ms)
            const weekMs = 7 * 24 * 60 * 60 * 1000;
            
            // Time until target
            const timeUntil = target - now;
            
            // Progress is inverse of time remaining
            const progress = ((weekMs - timeUntil) / weekMs) * 100;
            
            return Math.min(Math.max(progress, 0), 100);
        }

        // Update display with subtle animation
        function updateValue(element, newValue, key) {
            if (prevValues[key] !== newValue) {
                element.textContent = newValue;
                element.classList.add('pulse');
                setTimeout(() => element.classList.remove('pulse'), 300);
                prevValues[key] = newValue;
            }
        }

        // Create confetti
        function createConfetti() {
            const colors = ['#E40521', '#E4007A', '#6B1F7C', '#001155', '#ffffff'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-20px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.animation = `confettiFall ${2 + Math.random() * 2}s linear forwards`;
                    celebrationOverlay.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 4000);
                }, i * 60);
            }
        }

        // Start celebration
        function startCelebration() {
            if (celebrationActive) return;
            celebrationActive = true;
            
            containerEl.classList.add('celebration');
            celebrationOverlay.classList.add('active');
            
            // Show ripple
            ripple.classList.add('active');
            setTimeout(() => ripple.classList.remove('active'), 1000);
            
            // Show beer emoji
            setTimeout(() => {
                beerEmoji.classList.add('active');
            }, 200);
            
            // Hide beer emoji after a while
            setTimeout(() => {
                beerEmoji.classList.remove('active');
            }, 3000);
            
            // Create confetti
            createConfetti();
            
            // Update status
            statusEl.textContent = 'üçµüéâ PROST! 3 Uhr Gl√º√º Uhr! üéâüçµ';
        }

        // End celebration
        function endCelebration() {
            celebrationActive = false;
            containerEl.classList.remove('celebration');
            celebrationOverlay.classList.remove('active');
            statusEl.textContent = 'Bis zur 4 Uhr Bier Uhr';
        }

        // Main update function
        function updateCountdown() {
            const now = getZurichTime();
            const target = getNextFriday16();
            
            // Check for Feierabend time
            const isFeierabend = isFeierabendTime();
            
            if (isFeierabend && !celebrationActive) {
                startCelebration();
            } else if (!isFeierabend && celebrationActive) {
                endCelebration();
            }
            
            // Calculate time difference
            const diff = Math.max(target - now, 0);
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            // Check for last 10 seconds (only when not in celebration mode)
            const totalSeconds = Math.floor(diff / 1000);
            if (!isFeierabend && totalSeconds <= 10 && totalSeconds > 0 && !lastTenSecondsActive) {
                lastTenSecondsActive = true;
                containerEl.classList.add('final-countdown');
            } else if (totalSeconds > 10 || totalSeconds === 0 || isFeierabend) {
                if (lastTenSecondsActive) {
                    lastTenSecondsActive = false;
                    containerEl.classList.remove('final-countdown');
                }
            }
            
            // Update display
            updateValue(daysEl, String(days), 'days');
            updateValue(hoursEl, String(hours).padStart(2, '0'), 'hours');
            updateValue(minutesEl, String(minutes).padStart(2, '0'), 'minutes');
            updateValue(secondsEl, String(seconds).padStart(2, '0'), 'seconds');
            
            // Update progress bar
            if (isFeierabend) {
                progressEl.style.width = '100%';
            } else {
                const progress = getWeekProgress();
                progressEl.style.width = progress.toFixed(2) + '%';
            }
        }

        // Initialize
        updateCountdown();
        setInterval(updateCountdown, 1000);
        // Auto-reload on content update
        setInterval(async () => {
            try {
                const response = await fetch(location.href, { cache: 'no-cache' });
                if (response.status === 200) {
                    location.reload();
                }
            } catch (e) {
                // Ignore errors (e.g., offline)
            }
        }, 30000); // Check every 30 seconds
    </script>
</body>
</html>
