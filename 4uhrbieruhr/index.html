<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feierabend Countdown</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --navy: #001155;
            --navy-light: #002277;
            --white: #ffffff;
            --gray-100: #f5f5f5;
            --gray-200: #e8e8e8;
            --gray-500: #6b7280;
            --accent: #0066cc;
            --success: #00aa55;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            color: var(--navy);
        }

        .container {
            text-align: center;
            padding: 2rem;
            max-width: 800px;
            width: 100%;
        }

        .title {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 300;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
            color: var(--navy);
        }

        .subtitle {
            font-size: clamp(0.875rem, 2vw, 1rem);
            font-weight: 400;
            color: var(--gray-500);
            margin-bottom: 3rem;
        }

        .countdown {
            display: flex;
            justify-content: center;
            align-items: baseline;
            gap: clamp(0.5rem, 2vw, 1.5rem);
            margin-bottom: 3rem;
        }

        .time-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .time-value {
            font-size: clamp(3rem, 12vw, 7rem);
            font-weight: 600;
            line-height: 1;
            letter-spacing: -0.03em;
            color: var(--navy);
            transition: transform 0.15s ease, color 0.3s ease;
            font-variant-numeric: tabular-nums;
        }

        .time-value.pulse {
            animation: subtlePulse 0.3s ease;
        }

        @keyframes subtlePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .time-label {
            font-size: clamp(0.625rem, 1.5vw, 0.75rem);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--gray-500);
            margin-top: 0.5rem;
        }

        .separator {
            font-size: clamp(2rem, 8vw, 5rem);
            font-weight: 300;
            color: var(--gray-200);
            line-height: 1;
            align-self: flex-start;
            margin-top: 0.1em;
        }

        .status {
            font-size: clamp(0.875rem, 2vw, 1rem);
            font-weight: 400;
            color: var(--gray-500);
            transition: color 0.3s ease;
        }

        /* Last 10 seconds animation */
        .final-countdown .time-value {
            color: var(--accent);
        }

        .final-countdown .time-value.pulse {
            animation: finalPulse 0.5s ease;
        }

        @keyframes finalPulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.08); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Celebration state */
        .celebration {
            position: relative;
        }

        .celebration .title {
            color: var(--success);
        }

        .celebration .time-value {
            color: var(--success);
        }

        .celebration .status {
            color: var(--success);
            font-weight: 500;
        }

        /* Celebration animation overlay */
        .celebration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .celebration-overlay.active {
            opacity: 1;
        }

        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            opacity: 0;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-20px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Success checkmark animation */
        .checkmark-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 200;
            pointer-events: none;
        }

        .checkmark-container.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .checkmark {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--success);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 20px 60px rgba(0, 170, 85, 0.3);
        }

        .checkmark svg {
            width: 60px;
            height: 60px;
            stroke: white;
            stroke-width: 3;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .checkmark svg path {
            stroke-dasharray: 100;
            stroke-dashoffset: 100;
            animation: drawCheck 0.5s ease forwards 0.3s;
        }

        @keyframes drawCheck {
            to {
                stroke-dashoffset: 0;
            }
        }

        /* Ripple effect on celebration */
        .ripple {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: transparent;
            border: 2px solid var(--success);
            opacity: 0;
            pointer-events: none;
            z-index: 150;
        }

        .ripple.active {
            animation: rippleExpand 1s ease-out forwards;
        }

        @keyframes rippleExpand {
            0% {
                width: 10px;
                height: 10px;
                opacity: 1;
            }
            100% {
                width: 200vmax;
                height: 200vmax;
                opacity: 0;
            }
        }

        /* Progress indicator */
        .progress-bar {
            width: 100%;
            max-width: 400px;
            height: 2px;
            background: var(--gray-200);
            margin: 2rem auto 0;
            border-radius: 1px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--navy);
            transition: width 1s linear;
            border-radius: 1px;
        }

        .celebration .progress-fill {
            background: var(--success);
        }

        /* Responsive */
        @media (max-width: 600px) {
            .separator {
                margin: 0 -0.25rem;
            }
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="celebration-overlay" id="celebration-overlay"></div>
    <div class="checkmark-container" id="checkmark">
        <div class="checkmark">
            <svg viewBox="0 0 24 24">
                <path d="M5 12l5 5L20 7"/>
            </svg>
        </div>
    </div>
    <div class="ripple" id="ripple"></div>

    <div class="container" id="container">
        <h1 class="title">Feierabend Countdown</h1>
        <p class="subtitle">Jeden Freitag um 16:00 Uhr</p>

        <div class="countdown">
            <div class="time-group">
                <span class="time-value" id="days">0</span>
                <span class="time-label">Tage</span>
            </div>
            <span class="separator">:</span>
            <div class="time-group">
                <span class="time-value" id="hours">00</span>
                <span class="time-label">Stunden</span>
            </div>
            <span class="separator">:</span>
            <div class="time-group">
                <span class="time-value" id="minutes">00</span>
                <span class="time-label">Minuten</span>
            </div>
            <span class="separator">:</span>
            <div class="time-group">
                <span class="time-value" id="seconds">00</span>
                <span class="time-label">Sekunden</span>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <p class="status" id="status">Bis zum n√§chsten Feierabend</p>
    </div>

    <script>
        // Z√ºrich timezone
        const TIMEZONE = 'Europe/Zurich';
        const TARGET_DAY = 5; // Friday (0 = Sunday, 5 = Friday)
        const TARGET_HOUR = 16;
        const TARGET_MINUTE = 0;

        // DOM Elements
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const statusEl = document.getElementById('status');
        const progressEl = document.getElementById('progress');
        const containerEl = document.getElementById('container');
        const celebrationOverlay = document.getElementById('celebration-overlay');
        const checkmark = document.getElementById('checkmark');
        const ripple = document.getElementById('ripple');

        let prevValues = { days: '', hours: '', minutes: '', seconds: '' };
        let celebrationActive = false;
        let lastTenSecondsActive = false;

        // Get current time in Z√ºrich
        function getZurichTime() {
            return new Date(new Date().toLocaleString('en-US', { timeZone: TIMEZONE }));
        }

        // Get next Friday 16:00 in Z√ºrich time
        function getNextFriday16() {
            const now = getZurichTime();
            const target = new Date(now);
            
            // Set to 16:00
            target.setHours(TARGET_HOUR, TARGET_MINUTE, 0, 0);
            
            // Calculate days until Friday
            const currentDay = now.getDay();
            let daysUntilFriday = TARGET_DAY - currentDay;
            
            // If it's Friday but past 16:00, or if it's after Friday, go to next week
            if (daysUntilFriday < 0 || (daysUntilFriday === 0 && now >= target)) {
                daysUntilFriday += 7;
            }
            
            target.setDate(target.getDate() + daysUntilFriday);
            
            return target;
        }

        // Check if it's currently "Feierabend" time (Friday 16:00-17:00)
        function isFeierabendTime() {
            const now = getZurichTime();
            return now.getDay() === TARGET_DAY && 
                   now.getHours() >= TARGET_HOUR && 
                   now.getHours() < TARGET_HOUR + 1;
        }

        // Calculate progress through the week
        function getWeekProgress() {
            const now = getZurichTime();
            const target = getNextFriday16();
            
            // Total time in a week (7 days in ms)
            const weekMs = 7 * 24 * 60 * 60 * 1000;
            
            // Time until target
            const timeUntil = target - now;
            
            // Progress is inverse of time remaining
            const progress = ((weekMs - timeUntil) / weekMs) * 100;
            
            return Math.min(Math.max(progress, 0), 100);
        }

        // Update display with subtle animation
        function updateValue(element, newValue, key) {
            if (prevValues[key] !== newValue) {
                element.textContent = newValue;
                element.classList.add('pulse');
                setTimeout(() => element.classList.remove('pulse'), 300);
                prevValues[key] = newValue;
            }
        }

        // Create confetti
        function createConfetti() {
            const colors = ['#001155', '#0066cc', '#00aa55', '#002277'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-20px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.animation = `confettiFall ${2 + Math.random() * 2}s linear forwards`;
                    celebrationOverlay.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 4000);
                }, i * 60);
            }
        }

        // Start celebration
        function startCelebration() {
            if (celebrationActive) return;
            celebrationActive = true;
            
            containerEl.classList.add('celebration');
            celebrationOverlay.classList.add('active');
            
            // Show ripple
            ripple.classList.add('active');
            setTimeout(() => ripple.classList.remove('active'), 1000);
            
            // Show checkmark
            setTimeout(() => {
                checkmark.classList.add('active');
            }, 200);
            
            // Hide checkmark after a while
            setTimeout(() => {
                checkmark.classList.remove('active');
            }, 3000);
            
            // Create confetti
            createConfetti();
            
            // Update status
            statusEl.textContent = 'üç∫ Prost! Feierabend!';
        }

        // End celebration
        function endCelebration() {
            celebrationActive = false;
            containerEl.classList.remove('celebration');
            celebrationOverlay.classList.remove('active');
            statusEl.textContent = 'Bis zum n√§chsten Feierabend';
        }

        // Main update function
        function updateCountdown() {
            const now = getZurichTime();
            const target = getNextFriday16();
            
            // Check for Feierabend time
            const isFeierabend = isFeierabendTime();
            
            if (isFeierabend && !celebrationActive) {
                startCelebration();
            } else if (!isFeierabend && celebrationActive) {
                endCelebration();
            }
            
            // Calculate time difference
            let diff = target - now;
            
            if (diff < 0) {
                diff = 0;
            }
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            // Check for last 10 seconds
            const totalSeconds = Math.floor(diff / 1000);
            if (totalSeconds <= 10 && totalSeconds > 0 && !lastTenSecondsActive) {
                lastTenSecondsActive = true;
                containerEl.classList.add('final-countdown');
            } else if (totalSeconds > 10 && lastTenSecondsActive) {
                lastTenSecondsActive = false;
                containerEl.classList.remove('final-countdown');
            }
            
            // Update display
            updateValue(daysEl, String(days), 'days');
            updateValue(hoursEl, String(hours).padStart(2, '0'), 'hours');
            updateValue(minutesEl, String(minutes).padStart(2, '0'), 'minutes');
            updateValue(secondsEl, String(seconds).padStart(2, '0'), 'seconds');
            
            // Update progress bar
            if (isFeierabend) {
                progressEl.style.width = '100%';
            } else {
                const progress = getWeekProgress();
                progressEl.style.width = progress.toFixed(2) + '%';
            }
        }

        // Initialize
        updateCountdown();
        setInterval(updateCountdown, 1000);
    </script>
</body>
</html>
